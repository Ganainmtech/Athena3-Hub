{"ast":null,"code":"import { Buffer } from 'buffer';\nimport * as encoding from '../../../encoding/encoding';\nimport JSONRequest from '../jsonrequest';\nimport { SimulateResponse } from './models/types';\n/**\n * Sets the default header (if not previously set) for simulating a raw\n * transaction.\n * @param headers - A headers object\n */\nexport function setSimulateTransactionsHeaders(headers = {}) {\n  let hdrs = headers;\n  if (Object.keys(hdrs).every(key => key.toLowerCase() !== 'content-type')) {\n    hdrs = {\n      ...headers\n    };\n    hdrs['Content-Type'] = 'application/msgpack';\n  }\n  return hdrs;\n}\n/**\n * Simulates signed txns.\n */\nexport default class SimulateRawTransactions extends JSONRequest {\n  constructor(c, request) {\n    super(c);\n    this.query.format = 'msgpack';\n    this.requestBytes = encoding.rawEncode(request.get_obj_for_encoding(true));\n  }\n  // eslint-disable-next-line class-methods-use-this\n  path() {\n    return '/v2/transactions/simulate';\n  }\n  async do(headers = {}) {\n    const txHeaders = setSimulateTransactionsHeaders(headers);\n    const res = await this.c.post(this.path(), Buffer.from(this.requestBytes), txHeaders, this.query, false);\n    return this.prepare(res.body);\n  }\n  // eslint-disable-next-line class-methods-use-this\n  prepare(body) {\n    const decoded = encoding.decode(body);\n    return SimulateResponse.from_obj_for_encoding(decoded);\n  }\n}","map":{"version":3,"names":["Buffer","encoding","JSONRequest","SimulateResponse","setSimulateTransactionsHeaders","headers","hdrs","Object","keys","every","key","toLowerCase","SimulateRawTransactions","constructor","c","request","query","format","requestBytes","rawEncode","get_obj_for_encoding","path","do","txHeaders","res","post","from","prepare","body","decoded","decode","from_obj_for_encoding"],"sources":["/Users/wanjinwoo/Desktop/Study/web3/Algorand/Athena3-Hub/node_modules/algosdk/src/client/v2/algod/simulateTransaction.ts"],"sourcesContent":["import { Buffer } from 'buffer';\nimport * as encoding from '../../../encoding/encoding';\nimport HTTPClient from '../../client';\nimport JSONRequest from '../jsonrequest';\nimport { SimulateRequest, SimulateResponse } from './models/types';\n\n/**\n * Sets the default header (if not previously set) for simulating a raw\n * transaction.\n * @param headers - A headers object\n */\nexport function setSimulateTransactionsHeaders(headers = {}) {\n  let hdrs = headers;\n  if (Object.keys(hdrs).every((key) => key.toLowerCase() !== 'content-type')) {\n    hdrs = { ...headers };\n    hdrs['Content-Type'] = 'application/msgpack';\n  }\n  return hdrs;\n}\n\n/**\n * Simulates signed txns.\n */\nexport default class SimulateRawTransactions extends JSONRequest<\n  SimulateResponse,\n  Uint8Array\n> {\n  private requestBytes: Uint8Array;\n\n  constructor(c: HTTPClient, request: SimulateRequest) {\n    super(c);\n    this.query.format = 'msgpack';\n    this.requestBytes = encoding.rawEncode(request.get_obj_for_encoding(true));\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  path() {\n    return '/v2/transactions/simulate';\n  }\n\n  async do(headers = {}) {\n    const txHeaders = setSimulateTransactionsHeaders(headers);\n    const res = await this.c.post(\n      this.path(),\n      Buffer.from(this.requestBytes),\n      txHeaders,\n      this.query,\n      false\n    );\n    return this.prepare(res.body);\n  }\n\n  // eslint-disable-next-line class-methods-use-this\n  prepare(body: Uint8Array): SimulateResponse {\n    const decoded = encoding.decode(body);\n    return SimulateResponse.from_obj_for_encoding(decoded);\n  }\n}\n"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;AAC/B,OAAO,KAAKC,QAAQ,MAAM,4BAA4B;AAEtD,OAAOC,WAAW,MAAM,gBAAgB;AACxC,SAA0BC,gBAAgB,QAAQ,gBAAgB;AAElE;;;;;AAKA,OAAM,SAAUC,8BAA8BA,CAACC,OAAO,GAAG,EAAE;EACzD,IAAIC,IAAI,GAAGD,OAAO;EAClB,IAAIE,MAAM,CAACC,IAAI,CAACF,IAAI,CAAC,CAACG,KAAK,CAAEC,GAAG,IAAKA,GAAG,CAACC,WAAW,EAAE,KAAK,cAAc,CAAC,EAAE;IAC1EL,IAAI,GAAG;MAAE,GAAGD;IAAO,CAAE;IACrBC,IAAI,CAAC,cAAc,CAAC,GAAG,qBAAqB;;EAE9C,OAAOA,IAAI;AACb;AAEA;;;AAGA,eAAc,MAAOM,uBAAwB,SAAQV,WAGpD;EAGCW,YAAYC,CAAa,EAAEC,OAAwB;IACjD,KAAK,CAACD,CAAC,CAAC;IACR,IAAI,CAACE,KAAK,CAACC,MAAM,GAAG,SAAS;IAC7B,IAAI,CAACC,YAAY,GAAGjB,QAAQ,CAACkB,SAAS,CAACJ,OAAO,CAACK,oBAAoB,CAAC,IAAI,CAAC,CAAC;EAC5E;EAEA;EACAC,IAAIA,CAAA;IACF,OAAO,2BAA2B;EACpC;EAEA,MAAMC,EAAEA,CAACjB,OAAO,GAAG,EAAE;IACnB,MAAMkB,SAAS,GAAGnB,8BAA8B,CAACC,OAAO,CAAC;IACzD,MAAMmB,GAAG,GAAG,MAAM,IAAI,CAACV,CAAC,CAACW,IAAI,CAC3B,IAAI,CAACJ,IAAI,EAAE,EACXrB,MAAM,CAAC0B,IAAI,CAAC,IAAI,CAACR,YAAY,CAAC,EAC9BK,SAAS,EACT,IAAI,CAACP,KAAK,EACV,KAAK,CACN;IACD,OAAO,IAAI,CAACW,OAAO,CAACH,GAAG,CAACI,IAAI,CAAC;EAC/B;EAEA;EACAD,OAAOA,CAACC,IAAgB;IACtB,MAAMC,OAAO,GAAG5B,QAAQ,CAAC6B,MAAM,CAACF,IAAI,CAAC;IACrC,OAAOzB,gBAAgB,CAAC4B,qBAAqB,CAACF,OAAO,CAAC;EACxD"},"metadata":{},"sourceType":"module","externalDependencies":[]}