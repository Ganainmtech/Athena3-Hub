{"ast":null,"code":"import { getError, getErrorByCode, isReservedErrorCode } from \"./error\";\nimport { INTERNAL_ERROR, SERVER_ERROR } from \"./constants\";\nexport function payloadId() {\n  var entropy = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 3;\n  var date = Date.now() * Math.pow(10, entropy);\n  var extra = Math.floor(Math.random() * Math.pow(10, entropy));\n  return date + extra;\n}\nexport function getBigIntRpcId() {\n  var entropy = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 6;\n  return BigInt(payloadId(entropy));\n}\nexport function formatJsonRpcRequest(method, params, id) {\n  return {\n    id: id || payloadId(),\n    jsonrpc: \"2.0\",\n    method: method,\n    params: params\n  };\n}\nexport function formatJsonRpcResult(id, result) {\n  return {\n    id: id,\n    jsonrpc: \"2.0\",\n    result: result\n  };\n}\nexport function formatJsonRpcError(id, error, data) {\n  return {\n    id: id,\n    jsonrpc: \"2.0\",\n    error: formatErrorMessage(error, data)\n  };\n}\nexport function formatErrorMessage(error, data) {\n  if (typeof error === \"undefined\") {\n    return getError(INTERNAL_ERROR);\n  }\n  if (typeof error === \"string\") {\n    error = Object.assign(Object.assign({}, getError(SERVER_ERROR)), {\n      message: error\n    });\n  }\n  if (typeof data !== \"undefined\") {\n    error.data = data;\n  }\n  if (isReservedErrorCode(error.code)) {\n    error = getErrorByCode(error.code);\n  }\n  return error;\n}","map":{"version":3,"names":["getError","getErrorByCode","isReservedErrorCode","INTERNAL_ERROR","SERVER_ERROR","payloadId","entropy","arguments","length","undefined","date","Date","now","Math","pow","extra","floor","random","getBigIntRpcId","BigInt","formatJsonRpcRequest","method","params","id","jsonrpc","formatJsonRpcResult","result","formatJsonRpcError","error","data","formatErrorMessage","Object","assign","message","code"],"sources":["../../src/format.ts"],"sourcesContent":[null],"mappings":"AAAA,SAASA,QAAQ,EAAEC,cAAc,EAAEC,mBAAmB,QAA2B,SAAS;AAC1F,SAASC,cAAc,EAAEC,YAAY,QAAQ,aAAa;AAG1D,OAAM,SAAUC,SAASA,CAAA,EAAY;EAAA,IAAXC,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC;EACnC,IAAMG,IAAI,GAAGC,IAAI,CAACC,GAAG,EAAE,GAAGC,IAAI,CAACC,GAAG,CAAC,EAAE,EAAER,OAAO,CAAC;EAC/C,IAAMS,KAAK,GAAGF,IAAI,CAACG,KAAK,CAACH,IAAI,CAACI,MAAM,EAAE,GAAGJ,IAAI,CAACC,GAAG,CAAC,EAAE,EAAER,OAAO,CAAC,CAAC;EAC/D,OAAOI,IAAI,GAAGK,KAAK;AACrB;AAEA,OAAM,SAAUG,cAAcA,CAAA,EAAY;EAAA,IAAXZ,OAAO,GAAAC,SAAA,CAAAC,MAAA,QAAAD,SAAA,QAAAE,SAAA,GAAAF,SAAA,MAAG,CAAC;EACxC,OAAOY,MAAM,CAACd,SAAS,CAACC,OAAO,CAAC,CAAC;AACnC;AAEA,OAAM,SAAUc,oBAAoBA,CAClCC,MAAc,EACdC,MAAS,EACTC,EAAW;EAEX,OAAO;IACLA,EAAE,EAAEA,EAAE,IAAIlB,SAAS,EAAE;IACrBmB,OAAO,EAAE,KAAK;IACdH,MAAM,EAANA,MAAM;IACNC,MAAM,EAANA;GACD;AACH;AAEA,OAAM,SAAUG,mBAAmBA,CAAUF,EAAU,EAAEG,MAAS;EAChE,OAAO;IACLH,EAAE,EAAFA,EAAE;IACFC,OAAO,EAAE,KAAK;IACdE,MAAM,EAANA;GACD;AACH;AAEA,OAAM,SAAUC,kBAAkBA,CAChCJ,EAAU,EACVK,KAA8B,EAC9BC,IAAa;EAEb,OAAO;IACLN,EAAE,EAAFA,EAAE;IACFC,OAAO,EAAE,KAAK;IACdI,KAAK,EAAEE,kBAAkB,CAACF,KAAK,EAAEC,IAAI;GACtC;AACH;AAEA,OAAM,SAAUC,kBAAkBA,CAACF,KAA8B,EAAEC,IAAa;EAC9E,IAAI,OAAOD,KAAK,KAAK,WAAW,EAAE;IAChC,OAAO5B,QAAQ,CAACG,cAAc,CAAC;;EAEjC,IAAI,OAAOyB,KAAK,KAAK,QAAQ,EAAE;IAC7BA,KAAK,GAAAG,MAAA,CAAAC,MAAA,CAAAD,MAAA,CAAAC,MAAA,KACAhC,QAAQ,CAACI,YAAY,CAAC;MACzB6B,OAAO,EAAEL;IAAK,EACf;;EAEH,IAAI,OAAOC,IAAI,KAAK,WAAW,EAAE;IAC/BD,KAAK,CAACC,IAAI,GAAGA,IAAI;;EAEnB,IAAI3B,mBAAmB,CAAC0B,KAAK,CAACM,IAAI,CAAC,EAAE;IACnCN,KAAK,GAAG3B,cAAc,CAAC2B,KAAK,CAACM,IAAI,CAAC;;EAEpC,OAAON,KAAK;AACd"},"metadata":{},"sourceType":"module","externalDependencies":[]}