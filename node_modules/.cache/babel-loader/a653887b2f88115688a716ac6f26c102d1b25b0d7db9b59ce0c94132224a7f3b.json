{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getWindowMetadata = void 0;\nvar window_getters_1 = require(\"@walletconnect/window-getters\");\nfunction getWindowMetadata() {\n  var doc;\n  var loc;\n  try {\n    doc = window_getters_1.getDocumentOrThrow();\n    loc = window_getters_1.getLocationOrThrow();\n  } catch (e) {\n    return null;\n  }\n  function getIcons() {\n    var links = doc.getElementsByTagName(\"link\");\n    var icons = [];\n    for (var i = 0; i < links.length; i++) {\n      var link = links[i];\n      var rel = link.getAttribute(\"rel\");\n      if (rel) {\n        if (rel.toLowerCase().indexOf(\"icon\") > -1) {\n          var href = link.getAttribute(\"href\");\n          if (href) {\n            if (href.toLowerCase().indexOf(\"https:\") === -1 && href.toLowerCase().indexOf(\"http:\") === -1 && href.indexOf(\"//\") !== 0) {\n              var absoluteHref = loc.protocol + \"//\" + loc.host;\n              if (href.indexOf(\"/\") === 0) {\n                absoluteHref += href;\n              } else {\n                var path = loc.pathname.split(\"/\");\n                path.pop();\n                var finalPath = path.join(\"/\");\n                absoluteHref += finalPath + \"/\" + href;\n              }\n              icons.push(absoluteHref);\n            } else if (href.indexOf(\"//\") === 0) {\n              var absoluteUrl = loc.protocol + href;\n              icons.push(absoluteUrl);\n            } else {\n              icons.push(href);\n            }\n          }\n        }\n      }\n    }\n    return icons;\n  }\n  function getWindowMetadataOfAny() {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    var metaTags = doc.getElementsByTagName(\"meta\");\n    var _loop = function _loop() {\n        var tag = metaTags[i];\n        var attributes = [\"itemprop\", \"property\", \"name\"].map(function (target) {\n          return tag.getAttribute(target);\n        }).filter(function (attr) {\n          if (attr) {\n            return args.includes(attr);\n          }\n          return false;\n        });\n        if (attributes.length && attributes) {\n          var content = tag.getAttribute(\"content\");\n          if (content) {\n            return {\n              v: content\n            };\n          }\n        }\n      },\n      _ret;\n    for (var i = 0; i < metaTags.length; i++) {\n      _ret = _loop();\n      if (_ret) return _ret.v;\n    }\n    return \"\";\n  }\n  function getName() {\n    var name = getWindowMetadataOfAny(\"name\", \"og:site_name\", \"og:title\", \"twitter:title\");\n    if (!name) {\n      name = doc.title;\n    }\n    return name;\n  }\n  function getDescription() {\n    var description = getWindowMetadataOfAny(\"description\", \"og:description\", \"twitter:description\", \"keywords\");\n    return description;\n  }\n  var name = getName();\n  var description = getDescription();\n  var url = loc.origin;\n  var icons = getIcons();\n  var meta = {\n    description: description,\n    url: url,\n    icons: icons,\n    name: name\n  };\n  return meta;\n}\nexports.getWindowMetadata = getWindowMetadata;","map":{"version":3,"names":["window_getters_1","require","getWindowMetadata","doc","loc","getDocumentOrThrow","getLocationOrThrow","e","getIcons","links","getElementsByTagName","icons","i","length","link","rel","getAttribute","toLowerCase","indexOf","href","absoluteHref","protocol","host","path","pathname","split","pop","finalPath","join","push","absoluteUrl","getWindowMetadataOfAny","_len","arguments","args","Array","_key","metaTags","_loop","tag","attributes","map","target","filter","attr","includes","content","v","_ret","getName","name","title","getDescription","description","url","origin","meta","exports"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}