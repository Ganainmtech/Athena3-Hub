{"ast":null,"code":"import * as env from \"@walletconnect/environment\";\nimport { ENCRYPT_OP, DECRYPT_OP, SIGN_OP, VERIFY_OP, AES_BROWSER_ALGO, AES_LENGTH, HMAC_BROWSER_ALGO, HMAC_BROWSER, HMAC_LENGTH, SHA256_BROWSER_ALGO, SHA512_BROWSER_ALGO, LENGTH_512 } from \"../constants\";\nexport function getAlgo(type) {\n  return type === AES_BROWSER_ALGO ? {\n    length: AES_LENGTH,\n    name: AES_BROWSER_ALGO\n  } : {\n    hash: {\n      name: HMAC_BROWSER_ALGO\n    },\n    name: HMAC_BROWSER\n  };\n}\nexport function getOps(type) {\n  return type === AES_BROWSER_ALGO ? [ENCRYPT_OP, DECRYPT_OP] : [SIGN_OP, VERIFY_OP];\n}\nexport async function browserExportKey(cryptoKey, type = AES_BROWSER_ALGO) {\n  const subtle = env.getSubtleCrypto();\n  return new Uint8Array(await subtle.exportKey(\"raw\", cryptoKey));\n}\nexport async function browserImportKey(buffer, type = AES_BROWSER_ALGO) {\n  return env.getSubtleCrypto().importKey(\"raw\", buffer, getAlgo(type), true, getOps(type));\n}\nexport async function browserAesEncrypt(iv, key, data) {\n  const subtle = env.getSubtleCrypto();\n  const cryptoKey = await browserImportKey(key, AES_BROWSER_ALGO);\n  const result = await subtle.encrypt({\n    iv,\n    name: AES_BROWSER_ALGO\n  }, cryptoKey, data);\n  return new Uint8Array(result);\n}\nexport async function browserAesDecrypt(iv, key, data) {\n  const subtle = env.getSubtleCrypto();\n  const cryptoKey = await browserImportKey(key, AES_BROWSER_ALGO);\n  const result = await subtle.decrypt({\n    iv,\n    name: AES_BROWSER_ALGO\n  }, cryptoKey, data);\n  return new Uint8Array(result);\n}\nexport async function browserHmacSha256Sign(key, data) {\n  const subtle = env.getSubtleCrypto();\n  const cryptoKey = await browserImportKey(key, HMAC_BROWSER);\n  const signature = await subtle.sign({\n    length: HMAC_LENGTH,\n    name: HMAC_BROWSER\n  }, cryptoKey, data);\n  return new Uint8Array(signature);\n}\nexport async function browserHmacSha512Sign(key, data) {\n  const subtle = env.getSubtleCrypto();\n  const cryptoKey = await browserImportKey(key, HMAC_BROWSER);\n  const signature = await subtle.sign({\n    length: LENGTH_512,\n    name: HMAC_BROWSER\n  }, cryptoKey, data);\n  return new Uint8Array(signature);\n}\nexport async function browserSha256(data) {\n  const subtle = env.getSubtleCrypto();\n  const result = await subtle.digest({\n    name: SHA256_BROWSER_ALGO\n  }, data);\n  return new Uint8Array(result);\n}\nexport async function browserSha512(data) {\n  const subtle = env.getSubtleCrypto();\n  const result = await subtle.digest({\n    name: SHA512_BROWSER_ALGO\n  }, data);\n  return new Uint8Array(result);\n}","map":{"version":3,"names":["env","ENCRYPT_OP","DECRYPT_OP","SIGN_OP","VERIFY_OP","AES_BROWSER_ALGO","AES_LENGTH","HMAC_BROWSER_ALGO","HMAC_BROWSER","HMAC_LENGTH","SHA256_BROWSER_ALGO","SHA512_BROWSER_ALGO","LENGTH_512","getAlgo","type","length","name","hash","getOps","browserExportKey","cryptoKey","subtle","getSubtleCrypto","Uint8Array","exportKey","browserImportKey","buffer","importKey","browserAesEncrypt","iv","key","data","result","encrypt","browserAesDecrypt","decrypt","browserHmacSha256Sign","signature","sign","browserHmacSha512Sign","browserSha256","digest","browserSha512"],"sources":["../../../src/lib/browser.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}