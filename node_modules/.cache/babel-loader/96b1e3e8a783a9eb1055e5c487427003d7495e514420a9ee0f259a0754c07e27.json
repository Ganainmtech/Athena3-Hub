{"ast":null,"code":"import { isJsonRpcRequest, isJsonRpcResponseSuccess, isJsonRpcResponseError, isInternalEvent, isReservedEvent } from \"@walletconnect/utils\";\nclass EventManager {\n  constructor() {\n    this._eventEmitters = [];\n  }\n  subscribe(eventEmitter) {\n    this._eventEmitters.push(eventEmitter);\n  }\n  unsubscribe(event) {\n    this._eventEmitters = this._eventEmitters.filter(x => x.event !== event);\n  }\n  trigger(payload) {\n    let eventEmitters = [];\n    let event;\n    if (isJsonRpcRequest(payload)) {\n      event = payload.method;\n    } else if (isJsonRpcResponseSuccess(payload) || isJsonRpcResponseError(payload)) {\n      event = `response:${payload.id}`;\n    } else if (isInternalEvent(payload)) {\n      event = payload.event;\n    } else {\n      event = \"\";\n    }\n    if (event) {\n      eventEmitters = this._eventEmitters.filter(eventEmitter => eventEmitter.event === event);\n    }\n    if ((!eventEmitters || !eventEmitters.length) && !isReservedEvent(event) && !isInternalEvent(event)) {\n      eventEmitters = this._eventEmitters.filter(eventEmitter => eventEmitter.event === \"call_request\");\n    }\n    eventEmitters.forEach(eventEmitter => {\n      if (isJsonRpcResponseError(payload)) {\n        const error = new Error(payload.error.message);\n        eventEmitter.callback(error, null);\n      } else {\n        eventEmitter.callback(null, payload);\n      }\n    });\n  }\n}\nexport default EventManager;","map":{"version":3,"names":["isJsonRpcRequest","isJsonRpcResponseSuccess","isJsonRpcResponseError","isInternalEvent","isReservedEvent","EventManager","constructor","_eventEmitters","subscribe","eventEmitter","push","unsubscribe","event","filter","x","trigger","payload","eventEmitters","method","id","length","forEach","error","Error","message","callback"],"sources":["../../src/events.ts"],"sourcesContent":[null],"mappings":"AAAA,SACEA,gBAAgB,EAChBC,wBAAwB,EACxBC,sBAAsB,EACtBC,eAAe,EACfC,eAAe,QACV,sBAAsB;AAW7B,MAAMC,YAAY;EAGhBC,YAAA;IACE,IAAI,CAACC,cAAc,GAAG,EAAE;EAC1B;EAEOC,SAASA,CAACC,YAA2B;IAC1C,IAAI,CAACF,cAAc,CAACG,IAAI,CAACD,YAAY,CAAC;EACxC;EAEOE,WAAWA,CAACC,KAAa;IAC9B,IAAI,CAACL,cAAc,GAAG,IAAI,CAACA,cAAc,CAACM,MAAM,CAACC,CAAC,IAAIA,CAAC,CAACF,KAAK,KAAKA,KAAK,CAAC;EAC1E;EAEOG,OAAOA,CACZC,OAA2F;IAE3F,IAAIC,aAAa,GAAoB,EAAE;IACvC,IAAIL,KAAa;IAEjB,IAAIZ,gBAAgB,CAACgB,OAAO,CAAC,EAAE;MAC7BJ,KAAK,GAAGI,OAAO,CAACE,MAAM;KACvB,MAAM,IAAIjB,wBAAwB,CAACe,OAAO,CAAC,IAAId,sBAAsB,CAACc,OAAO,CAAC,EAAE;MAC/EJ,KAAK,GAAG,YAAYI,OAAO,CAACG,EAAE,EAAE;KACjC,MAAM,IAAIhB,eAAe,CAACa,OAAO,CAAC,EAAE;MACnCJ,KAAK,GAAGI,OAAO,CAACJ,KAAK;KACtB,MAAM;MACLA,KAAK,GAAG,EAAE;;IAGZ,IAAIA,KAAK,EAAE;MACTK,aAAa,GAAG,IAAI,CAACV,cAAc,CAACM,MAAM,CACvCJ,YAA2B,IAAKA,YAAY,CAACG,KAAK,KAAKA,KAAK,CAC9D;;IAGH,IACE,CAAC,CAACK,aAAa,IAAI,CAACA,aAAa,CAACG,MAAM,KACxC,CAAChB,eAAe,CAACQ,KAAK,CAAC,IACvB,CAACT,eAAe,CAACS,KAAK,CAAC,EACvB;MACAK,aAAa,GAAG,IAAI,CAACV,cAAc,CAACM,MAAM,CACvCJ,YAA2B,IAAKA,YAAY,CAACG,KAAK,KAAK,cAAc,CACvE;;IAGHK,aAAa,CAACI,OAAO,CAAEZ,YAA2B,IAAI;MACpD,IAAIP,sBAAsB,CAACc,OAAO,CAAC,EAAE;QACnC,MAAMM,KAAK,GAAG,IAAIC,KAAK,CAACP,OAAO,CAACM,KAAK,CAACE,OAAO,CAAC;QAC9Cf,YAAY,CAACgB,QAAQ,CAACH,KAAK,EAAE,IAAI,CAAC;OACnC,MAAM;QACLb,YAAY,CAACgB,QAAQ,CAAC,IAAI,EAAET,OAAO,CAAC;;IAExC,CAAC,CAAC;EACJ;;AAGF,eAAeX,YAAY"},"metadata":{},"sourceType":"module","externalDependencies":[]}