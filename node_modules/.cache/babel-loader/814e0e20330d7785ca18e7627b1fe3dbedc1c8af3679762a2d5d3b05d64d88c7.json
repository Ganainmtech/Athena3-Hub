{"ast":null,"code":"import _regeneratorRuntime from \"/Users/wanjinwoo/Desktop/Study/web3/Algorand/Athena3-Hub/Athena3-Hub-athena-frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"/Users/wanjinwoo/Desktop/Study/web3/Algorand/Athena3-Hub/Athena3-Hub-athena-frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nimport _toConsumableArray from \"/Users/wanjinwoo/Desktop/Study/web3/Algorand/Athena3-Hub/Athena3-Hub-athena-frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";\nimport _classCallCheck from \"/Users/wanjinwoo/Desktop/Study/web3/Algorand/Athena3-Hub/Athena3-Hub-athena-frontend/node_modules/@babel/runtime/helpers/esm/classCallCheck.js\";\nimport _createClass from \"/Users/wanjinwoo/Desktop/Study/web3/Algorand/Athena3-Hub/Athena3-Hub-athena-frontend/node_modules/@babel/runtime/helpers/esm/createClass.js\";\nimport { parsePersonalSign, parseTransactionData, convertArrayBufferToHex, convertHexToArrayBuffer, getClientMeta, payloadId, uuid, formatRpcError, parseWalletConnectUri, convertNumberToHex, isJsonRpcResponseSuccess, isJsonRpcResponseError, isSilentPayload, getLocal, signingMethods, mobileLinkChoiceKey, isMobile, removeLocal } from \"@walletconnect/utils\";\nimport SocketTransport from \"@walletconnect/socket-transport\";\nimport { ERROR_SESSION_CONNECTED, ERROR_SESSION_DISCONNECTED, ERROR_SESSION_REJECTED, ERROR_MISSING_JSON_RPC, ERROR_MISSING_RESULT, ERROR_MISSING_ERROR, ERROR_MISSING_METHOD, ERROR_MISSING_ID, ERROR_INVALID_RESPONSE, ERROR_INVALID_URI, ERROR_MISSING_REQUIRED, ERROR_QRCODE_MODAL_NOT_PROVIDED, ERROR_QRCODE_MODAL_USER_CLOSED } from \"./errors\";\nimport EventManager from \"./events\";\nimport SessionStorage from \"./storage\";\nimport { getBridgeUrl } from \"./url\";\nvar Connector = /*#__PURE__*/function () {\n  function Connector(opts) {\n    _classCallCheck(this, Connector);\n    this.protocol = \"wc\";\n    this.version = 1;\n    this._bridge = \"\";\n    this._key = null;\n    this._clientId = \"\";\n    this._clientMeta = null;\n    this._peerId = \"\";\n    this._peerMeta = null;\n    this._handshakeId = 0;\n    this._handshakeTopic = \"\";\n    this._connected = false;\n    this._accounts = [];\n    this._chainId = 0;\n    this._networkId = 0;\n    this._rpcUrl = \"\";\n    this._eventManager = new EventManager();\n    this._clientMeta = getClientMeta() || opts.connectorOpts.clientMeta || null;\n    this._cryptoLib = opts.cryptoLib;\n    this._sessionStorage = opts.sessionStorage || new SessionStorage(opts.connectorOpts.storageId);\n    this._qrcodeModal = opts.connectorOpts.qrcodeModal;\n    this._qrcodeModalOptions = opts.connectorOpts.qrcodeModalOptions;\n    this._signingMethods = [].concat(_toConsumableArray(signingMethods), _toConsumableArray(opts.connectorOpts.signingMethods || []));\n    if (!opts.connectorOpts.bridge && !opts.connectorOpts.uri && !opts.connectorOpts.session) {\n      throw new Error(ERROR_MISSING_REQUIRED);\n    }\n    if (opts.connectorOpts.bridge) {\n      this.bridge = getBridgeUrl(opts.connectorOpts.bridge);\n    }\n    if (opts.connectorOpts.uri) {\n      this.uri = opts.connectorOpts.uri;\n    }\n    var session = opts.connectorOpts.session || this._getStorageSession();\n    if (session) {\n      this.session = session;\n    }\n    if (this.handshakeId) {\n      this._subscribeToSessionResponse(this.handshakeId, \"Session request rejected\");\n    }\n    this._transport = opts.transport || new SocketTransport({\n      protocol: this.protocol,\n      version: this.version,\n      url: this.bridge,\n      subscriptions: [this.clientId]\n    });\n    this._subscribeToInternalEvents();\n    this._initTransport();\n    if (opts.connectorOpts.uri) {\n      this._subscribeToSessionRequest();\n    }\n    if (opts.pushServerOpts) {\n      this._registerPushServer(opts.pushServerOpts);\n    }\n  }\n  _createClass(Connector, [{\n    key: \"bridge\",\n    get: function get() {\n      return this._bridge;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._bridge = value;\n    }\n  }, {\n    key: \"key\",\n    get: function get() {\n      if (this._key) {\n        var key = convertArrayBufferToHex(this._key, true);\n        return key;\n      }\n      return \"\";\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      var key = convertHexToArrayBuffer(value);\n      this._key = key;\n    }\n  }, {\n    key: \"clientId\",\n    get: function get() {\n      var clientId = this._clientId;\n      if (!clientId) {\n        clientId = this._clientId = uuid();\n      }\n      return this._clientId;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._clientId = value;\n    }\n  }, {\n    key: \"peerId\",\n    get: function get() {\n      return this._peerId;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._peerId = value;\n    }\n  }, {\n    key: \"clientMeta\",\n    get: function get() {\n      var clientMeta = this._clientMeta;\n      if (!clientMeta) {\n        clientMeta = this._clientMeta = getClientMeta();\n      }\n      return clientMeta;\n    },\n    set: function set(value) {}\n  }, {\n    key: \"peerMeta\",\n    get: function get() {\n      var peerMeta = this._peerMeta;\n      return peerMeta;\n    },\n    set: function set(value) {\n      this._peerMeta = value;\n    }\n  }, {\n    key: \"handshakeTopic\",\n    get: function get() {\n      return this._handshakeTopic;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._handshakeTopic = value;\n    }\n  }, {\n    key: \"handshakeId\",\n    get: function get() {\n      return this._handshakeId;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._handshakeId = value;\n    }\n  }, {\n    key: \"uri\",\n    get: function get() {\n      var _uri = this._formatUri();\n      return _uri;\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      var _this$_parseUri = this._parseUri(value),\n        handshakeTopic = _this$_parseUri.handshakeTopic,\n        bridge = _this$_parseUri.bridge,\n        key = _this$_parseUri.key;\n      this.handshakeTopic = handshakeTopic;\n      this.bridge = bridge;\n      this.key = key;\n    }\n  }, {\n    key: \"chainId\",\n    get: function get() {\n      var chainId = this._chainId;\n      return chainId;\n    },\n    set: function set(value) {\n      this._chainId = value;\n    }\n  }, {\n    key: \"networkId\",\n    get: function get() {\n      var networkId = this._networkId;\n      return networkId;\n    },\n    set: function set(value) {\n      this._networkId = value;\n    }\n  }, {\n    key: \"accounts\",\n    get: function get() {\n      var accounts = this._accounts;\n      return accounts;\n    },\n    set: function set(value) {\n      this._accounts = value;\n    }\n  }, {\n    key: \"rpcUrl\",\n    get: function get() {\n      var rpcUrl = this._rpcUrl;\n      return rpcUrl;\n    },\n    set: function set(value) {\n      this._rpcUrl = value;\n    }\n  }, {\n    key: \"connected\",\n    get: function get() {\n      return this._connected;\n    },\n    set: function set(value) {}\n  }, {\n    key: \"pending\",\n    get: function get() {\n      return !!this._handshakeTopic;\n    },\n    set: function set(value) {}\n  }, {\n    key: \"session\",\n    get: function get() {\n      return {\n        connected: this.connected,\n        accounts: this.accounts,\n        chainId: this.chainId,\n        bridge: this.bridge,\n        key: this.key,\n        clientId: this.clientId,\n        clientMeta: this.clientMeta,\n        peerId: this.peerId,\n        peerMeta: this.peerMeta,\n        handshakeId: this.handshakeId,\n        handshakeTopic: this.handshakeTopic\n      };\n    },\n    set: function set(value) {\n      if (!value) {\n        return;\n      }\n      this._connected = value.connected;\n      this.accounts = value.accounts;\n      this.chainId = value.chainId;\n      this.bridge = value.bridge;\n      this.key = value.key;\n      this.clientId = value.clientId;\n      this.clientMeta = value.clientMeta;\n      this.peerId = value.peerId;\n      this.peerMeta = value.peerMeta;\n      this.handshakeId = value.handshakeId;\n      this.handshakeTopic = value.handshakeTopic;\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, callback) {\n      var eventEmitter = {\n        event: event,\n        callback: callback\n      };\n      this._eventManager.subscribe(eventEmitter);\n    }\n  }, {\n    key: \"off\",\n    value: function off(event) {\n      this._eventManager.unsubscribe(event);\n    }\n  }, {\n    key: \"createInstantRequest\",\n    value: function () {\n      var _createInstantRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee(instantRequest) {\n        var _this = this;\n        var request, endInstantRequest, result;\n        return _regeneratorRuntime().wrap(function _callee$(_context) {\n          while (1) switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return this._generateKey();\n            case 2:\n              this._key = _context.sent;\n              request = this._formatRequest({\n                method: \"wc_instantRequest\",\n                params: [{\n                  peerId: this.clientId,\n                  peerMeta: this.clientMeta,\n                  request: this._formatRequest(instantRequest)\n                }]\n              });\n              this.handshakeId = request.id;\n              this.handshakeTopic = uuid();\n              this._eventManager.trigger({\n                event: \"display_uri\",\n                params: [this.uri]\n              });\n              this.on(\"modal_closed\", function () {\n                throw new Error(ERROR_QRCODE_MODAL_USER_CLOSED);\n              });\n              endInstantRequest = function endInstantRequest() {\n                _this.killSession();\n              };\n              _context.prev = 9;\n              _context.next = 12;\n              return this._sendCallRequest(request);\n            case 12:\n              result = _context.sent;\n              if (result) {\n                endInstantRequest();\n              }\n              return _context.abrupt(\"return\", result);\n            case 17:\n              _context.prev = 17;\n              _context.t0 = _context[\"catch\"](9);\n              endInstantRequest();\n              throw _context.t0;\n            case 21:\n            case \"end\":\n              return _context.stop();\n          }\n        }, _callee, this, [[9, 17]]);\n      }));\n      function createInstantRequest(_x) {\n        return _createInstantRequest.apply(this, arguments);\n      }\n      return createInstantRequest;\n    }()\n  }, {\n    key: \"connect\",\n    value: function () {\n      var _connect = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(opts) {\n        var _this2 = this;\n        return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n          while (1) switch (_context3.prev = _context3.next) {\n            case 0:\n              if (this._qrcodeModal) {\n                _context3.next = 2;\n                break;\n              }\n              throw new Error(ERROR_QRCODE_MODAL_NOT_PROVIDED);\n            case 2:\n              if (!this.connected) {\n                _context3.next = 4;\n                break;\n              }\n              return _context3.abrupt(\"return\", {\n                chainId: this.chainId,\n                accounts: this.accounts\n              });\n            case 4:\n              _context3.next = 6;\n              return this.createSession(opts);\n            case 6:\n              return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(resolve, reject) {\n                  return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                    while (1) switch (_context2.prev = _context2.next) {\n                      case 0:\n                        _this2.on(\"modal_closed\", function () {\n                          return reject(new Error(ERROR_QRCODE_MODAL_USER_CLOSED));\n                        });\n                        _this2.on(\"connect\", function (error, payload) {\n                          if (error) {\n                            return reject(error);\n                          }\n                          resolve(payload.params[0]);\n                        });\n                      case 2:\n                      case \"end\":\n                        return _context2.stop();\n                    }\n                  }, _callee2);\n                }));\n                return function (_x3, _x4) {\n                  return _ref.apply(this, arguments);\n                };\n              }()));\n            case 7:\n            case \"end\":\n              return _context3.stop();\n          }\n        }, _callee3, this);\n      }));\n      function connect(_x2) {\n        return _connect.apply(this, arguments);\n      }\n      return connect;\n    }()\n  }, {\n    key: \"createSession\",\n    value: function () {\n      var _createSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee4(opts) {\n        var request;\n        return _regeneratorRuntime().wrap(function _callee4$(_context4) {\n          while (1) switch (_context4.prev = _context4.next) {\n            case 0:\n              if (!this._connected) {\n                _context4.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_CONNECTED);\n            case 2:\n              if (!this.pending) {\n                _context4.next = 4;\n                break;\n              }\n              return _context4.abrupt(\"return\");\n            case 4:\n              _context4.next = 6;\n              return this._generateKey();\n            case 6:\n              this._key = _context4.sent;\n              request = this._formatRequest({\n                method: \"wc_sessionRequest\",\n                params: [{\n                  peerId: this.clientId,\n                  peerMeta: this.clientMeta,\n                  chainId: opts && opts.chainId ? opts.chainId : null\n                }]\n              });\n              this.handshakeId = request.id;\n              this.handshakeTopic = uuid();\n              this._sendSessionRequest(request, \"Session update rejected\", {\n                topic: this.handshakeTopic\n              });\n              this._eventManager.trigger({\n                event: \"display_uri\",\n                params: [this.uri]\n              });\n            case 12:\n            case \"end\":\n              return _context4.stop();\n          }\n        }, _callee4, this);\n      }));\n      function createSession(_x5) {\n        return _createSession.apply(this, arguments);\n      }\n      return createSession;\n    }()\n  }, {\n    key: \"approveSession\",\n    value: function approveSession(sessionStatus) {\n      if (this._connected) {\n        throw new Error(ERROR_SESSION_CONNECTED);\n      }\n      this.chainId = sessionStatus.chainId;\n      this.accounts = sessionStatus.accounts;\n      this.networkId = sessionStatus.networkId || 0;\n      this.rpcUrl = sessionStatus.rpcUrl || \"\";\n      var sessionParams = {\n        approved: true,\n        chainId: this.chainId,\n        networkId: this.networkId,\n        accounts: this.accounts,\n        rpcUrl: this.rpcUrl,\n        peerId: this.clientId,\n        peerMeta: this.clientMeta\n      };\n      var response = {\n        id: this.handshakeId,\n        jsonrpc: \"2.0\",\n        result: sessionParams\n      };\n      this._sendResponse(response);\n      this._connected = true;\n      this._setStorageSession();\n      this._eventManager.trigger({\n        event: \"connect\",\n        params: [{\n          peerId: this.peerId,\n          peerMeta: this.peerMeta,\n          chainId: this.chainId,\n          accounts: this.accounts\n        }]\n      });\n    }\n  }, {\n    key: \"rejectSession\",\n    value: function rejectSession(sessionError) {\n      if (this._connected) {\n        throw new Error(ERROR_SESSION_CONNECTED);\n      }\n      var message = sessionError && sessionError.message ? sessionError.message : ERROR_SESSION_REJECTED;\n      var response = this._formatResponse({\n        id: this.handshakeId,\n        error: {\n          message: message\n        }\n      });\n      this._sendResponse(response);\n      this._connected = false;\n      this._eventManager.trigger({\n        event: \"disconnect\",\n        params: [{\n          message: message\n        }]\n      });\n      this._removeStorageSession();\n    }\n  }, {\n    key: \"updateSession\",\n    value: function updateSession(sessionStatus) {\n      if (!this._connected) {\n        throw new Error(ERROR_SESSION_DISCONNECTED);\n      }\n      this.chainId = sessionStatus.chainId;\n      this.accounts = sessionStatus.accounts;\n      this.networkId = sessionStatus.networkId || 0;\n      this.rpcUrl = sessionStatus.rpcUrl || \"\";\n      var sessionParams = {\n        approved: true,\n        chainId: this.chainId,\n        networkId: this.networkId,\n        accounts: this.accounts,\n        rpcUrl: this.rpcUrl\n      };\n      var request = this._formatRequest({\n        method: \"wc_sessionUpdate\",\n        params: [sessionParams]\n      });\n      this._sendSessionRequest(request, \"Session update rejected\");\n      this._eventManager.trigger({\n        event: \"session_update\",\n        params: [{\n          chainId: this.chainId,\n          accounts: this.accounts\n        }]\n      });\n      this._manageStorageSession();\n    }\n  }, {\n    key: \"killSession\",\n    value: function () {\n      var _killSession = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee5(sessionError) {\n        var message, sessionParams, request;\n        return _regeneratorRuntime().wrap(function _callee5$(_context5) {\n          while (1) switch (_context5.prev = _context5.next) {\n            case 0:\n              message = sessionError ? sessionError.message : \"Session Disconnected\";\n              sessionParams = {\n                approved: false,\n                chainId: null,\n                networkId: null,\n                accounts: null\n              };\n              request = this._formatRequest({\n                method: \"wc_sessionUpdate\",\n                params: [sessionParams]\n              });\n              _context5.next = 5;\n              return this._sendRequest(request);\n            case 5:\n              this._handleSessionDisconnect(message);\n            case 6:\n            case \"end\":\n              return _context5.stop();\n          }\n        }, _callee5, this);\n      }));\n      function killSession(_x6) {\n        return _killSession.apply(this, arguments);\n      }\n      return killSession;\n    }()\n  }, {\n    key: \"sendTransaction\",\n    value: function () {\n      var _sendTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee6(tx) {\n        var parsedTx, request, result;\n        return _regeneratorRuntime().wrap(function _callee6$(_context6) {\n          while (1) switch (_context6.prev = _context6.next) {\n            case 0:\n              if (this._connected) {\n                _context6.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              parsedTx = parseTransactionData(tx);\n              request = this._formatRequest({\n                method: \"eth_sendTransaction\",\n                params: [parsedTx]\n              });\n              _context6.next = 6;\n              return this._sendCallRequest(request);\n            case 6:\n              result = _context6.sent;\n              return _context6.abrupt(\"return\", result);\n            case 8:\n            case \"end\":\n              return _context6.stop();\n          }\n        }, _callee6, this);\n      }));\n      function sendTransaction(_x7) {\n        return _sendTransaction.apply(this, arguments);\n      }\n      return sendTransaction;\n    }()\n  }, {\n    key: \"signTransaction\",\n    value: function () {\n      var _signTransaction = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee7(tx) {\n        var parsedTx, request, result;\n        return _regeneratorRuntime().wrap(function _callee7$(_context7) {\n          while (1) switch (_context7.prev = _context7.next) {\n            case 0:\n              if (this._connected) {\n                _context7.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              parsedTx = parseTransactionData(tx);\n              request = this._formatRequest({\n                method: \"eth_signTransaction\",\n                params: [parsedTx]\n              });\n              _context7.next = 6;\n              return this._sendCallRequest(request);\n            case 6:\n              result = _context7.sent;\n              return _context7.abrupt(\"return\", result);\n            case 8:\n            case \"end\":\n              return _context7.stop();\n          }\n        }, _callee7, this);\n      }));\n      function signTransaction(_x8) {\n        return _signTransaction.apply(this, arguments);\n      }\n      return signTransaction;\n    }()\n  }, {\n    key: \"signMessage\",\n    value: function () {\n      var _signMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee8(params) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee8$(_context8) {\n          while (1) switch (_context8.prev = _context8.next) {\n            case 0:\n              if (this._connected) {\n                _context8.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              request = this._formatRequest({\n                method: \"eth_sign\",\n                params: params\n              });\n              _context8.next = 5;\n              return this._sendCallRequest(request);\n            case 5:\n              result = _context8.sent;\n              return _context8.abrupt(\"return\", result);\n            case 7:\n            case \"end\":\n              return _context8.stop();\n          }\n        }, _callee8, this);\n      }));\n      function signMessage(_x9) {\n        return _signMessage.apply(this, arguments);\n      }\n      return signMessage;\n    }()\n  }, {\n    key: \"signPersonalMessage\",\n    value: function () {\n      var _signPersonalMessage = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee9(params) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee9$(_context9) {\n          while (1) switch (_context9.prev = _context9.next) {\n            case 0:\n              if (this._connected) {\n                _context9.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              params = parsePersonalSign(params);\n              request = this._formatRequest({\n                method: \"personal_sign\",\n                params: params\n              });\n              _context9.next = 6;\n              return this._sendCallRequest(request);\n            case 6:\n              result = _context9.sent;\n              return _context9.abrupt(\"return\", result);\n            case 8:\n            case \"end\":\n              return _context9.stop();\n          }\n        }, _callee9, this);\n      }));\n      function signPersonalMessage(_x10) {\n        return _signPersonalMessage.apply(this, arguments);\n      }\n      return signPersonalMessage;\n    }()\n  }, {\n    key: \"signTypedData\",\n    value: function () {\n      var _signTypedData = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee10(params) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee10$(_context10) {\n          while (1) switch (_context10.prev = _context10.next) {\n            case 0:\n              if (this._connected) {\n                _context10.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              request = this._formatRequest({\n                method: \"eth_signTypedData\",\n                params: params\n              });\n              _context10.next = 5;\n              return this._sendCallRequest(request);\n            case 5:\n              result = _context10.sent;\n              return _context10.abrupt(\"return\", result);\n            case 7:\n            case \"end\":\n              return _context10.stop();\n          }\n        }, _callee10, this);\n      }));\n      function signTypedData(_x11) {\n        return _signTypedData.apply(this, arguments);\n      }\n      return signTypedData;\n    }()\n  }, {\n    key: \"updateChain\",\n    value: function () {\n      var _updateChain = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee11(chainParams) {\n        var request, result;\n        return _regeneratorRuntime().wrap(function _callee11$(_context11) {\n          while (1) switch (_context11.prev = _context11.next) {\n            case 0:\n              if (this._connected) {\n                _context11.next = 2;\n                break;\n              }\n              throw new Error(\"Session currently disconnected\");\n            case 2:\n              request = this._formatRequest({\n                method: \"wallet_updateChain\",\n                params: [chainParams]\n              });\n              _context11.next = 5;\n              return this._sendCallRequest(request);\n            case 5:\n              result = _context11.sent;\n              return _context11.abrupt(\"return\", result);\n            case 7:\n            case \"end\":\n              return _context11.stop();\n          }\n        }, _callee11, this);\n      }));\n      function updateChain(_x12) {\n        return _updateChain.apply(this, arguments);\n      }\n      return updateChain;\n    }()\n  }, {\n    key: \"unsafeSend\",\n    value: function unsafeSend(request, options) {\n      var _this3 = this;\n      this._sendRequest(request, options);\n      this._eventManager.trigger({\n        event: \"call_request_sent\",\n        params: [{\n          request: request,\n          options: options\n        }]\n      });\n      return new Promise(function (resolve, reject) {\n        _this3._subscribeToResponse(request.id, function (error, payload) {\n          if (error) {\n            reject(error);\n            return;\n          }\n          if (!payload) {\n            throw new Error(ERROR_MISSING_JSON_RPC);\n          }\n          resolve(payload);\n        });\n      });\n    }\n  }, {\n    key: \"sendCustomRequest\",\n    value: function () {\n      var _sendCustomRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee12(request, options) {\n        var formattedRequest, result;\n        return _regeneratorRuntime().wrap(function _callee12$(_context12) {\n          while (1) switch (_context12.prev = _context12.next) {\n            case 0:\n              if (this._connected) {\n                _context12.next = 2;\n                break;\n              }\n              throw new Error(ERROR_SESSION_DISCONNECTED);\n            case 2:\n              _context12.t0 = request.method;\n              _context12.next = _context12.t0 === \"eth_accounts\" ? 5 : _context12.t0 === \"eth_chainId\" ? 6 : _context12.t0 === \"eth_sendTransaction\" ? 7 : _context12.t0 === \"eth_signTransaction\" ? 7 : _context12.t0 === \"personal_sign\" ? 9 : 11;\n              break;\n            case 5:\n              return _context12.abrupt(\"return\", this.accounts);\n            case 6:\n              return _context12.abrupt(\"return\", convertNumberToHex(this.chainId));\n            case 7:\n              if (request.params) {\n                request.params[0] = parseTransactionData(request.params[0]);\n              }\n              return _context12.abrupt(\"break\", 12);\n            case 9:\n              if (request.params) {\n                request.params = parsePersonalSign(request.params);\n              }\n              return _context12.abrupt(\"break\", 12);\n            case 11:\n              return _context12.abrupt(\"break\", 12);\n            case 12:\n              formattedRequest = this._formatRequest(request);\n              _context12.next = 15;\n              return this._sendCallRequest(formattedRequest, options);\n            case 15:\n              result = _context12.sent;\n              return _context12.abrupt(\"return\", result);\n            case 17:\n            case \"end\":\n              return _context12.stop();\n          }\n        }, _callee12, this);\n      }));\n      function sendCustomRequest(_x13, _x14) {\n        return _sendCustomRequest.apply(this, arguments);\n      }\n      return sendCustomRequest;\n    }()\n  }, {\n    key: \"approveRequest\",\n    value: function approveRequest(response) {\n      if (isJsonRpcResponseSuccess(response)) {\n        var formattedResponse = this._formatResponse(response);\n        this._sendResponse(formattedResponse);\n      } else {\n        throw new Error(ERROR_MISSING_RESULT);\n      }\n    }\n  }, {\n    key: \"rejectRequest\",\n    value: function rejectRequest(response) {\n      if (isJsonRpcResponseError(response)) {\n        var formattedResponse = this._formatResponse(response);\n        this._sendResponse(formattedResponse);\n      } else {\n        throw new Error(ERROR_MISSING_ERROR);\n      }\n    }\n  }, {\n    key: \"transportClose\",\n    value: function transportClose() {\n      this._transport.close();\n    }\n  }, {\n    key: \"_sendRequest\",\n    value: function () {\n      var _sendRequest2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee13(request, options) {\n        var callRequest, encryptionPayload, topic, payload, silent;\n        return _regeneratorRuntime().wrap(function _callee13$(_context13) {\n          while (1) switch (_context13.prev = _context13.next) {\n            case 0:\n              callRequest = this._formatRequest(request);\n              _context13.next = 3;\n              return this._encrypt(callRequest);\n            case 3:\n              encryptionPayload = _context13.sent;\n              topic = typeof (options === null || options === void 0 ? void 0 : options.topic) !== \"undefined\" ? options.topic : this.peerId;\n              payload = JSON.stringify(encryptionPayload);\n              silent = typeof (options === null || options === void 0 ? void 0 : options.forcePushNotification) !== \"undefined\" ? !options.forcePushNotification : isSilentPayload(callRequest);\n              this._transport.send(payload, topic, silent);\n            case 8:\n            case \"end\":\n              return _context13.stop();\n          }\n        }, _callee13, this);\n      }));\n      function _sendRequest(_x15, _x16) {\n        return _sendRequest2.apply(this, arguments);\n      }\n      return _sendRequest;\n    }()\n  }, {\n    key: \"_sendResponse\",\n    value: function () {\n      var _sendResponse2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee14(response) {\n        var encryptionPayload, topic, payload, silent;\n        return _regeneratorRuntime().wrap(function _callee14$(_context14) {\n          while (1) switch (_context14.prev = _context14.next) {\n            case 0:\n              _context14.next = 2;\n              return this._encrypt(response);\n            case 2:\n              encryptionPayload = _context14.sent;\n              topic = this.peerId;\n              payload = JSON.stringify(encryptionPayload);\n              silent = true;\n              this._transport.send(payload, topic, silent);\n            case 7:\n            case \"end\":\n              return _context14.stop();\n          }\n        }, _callee14, this);\n      }));\n      function _sendResponse(_x17) {\n        return _sendResponse2.apply(this, arguments);\n      }\n      return _sendResponse;\n    }()\n  }, {\n    key: \"_sendSessionRequest\",\n    value: function () {\n      var _sendSessionRequest2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee15(request, errorMsg, options) {\n        return _regeneratorRuntime().wrap(function _callee15$(_context15) {\n          while (1) switch (_context15.prev = _context15.next) {\n            case 0:\n              this._sendRequest(request, options);\n              this._subscribeToSessionResponse(request.id, errorMsg);\n            case 2:\n            case \"end\":\n              return _context15.stop();\n          }\n        }, _callee15, this);\n      }));\n      function _sendSessionRequest(_x18, _x19, _x20) {\n        return _sendSessionRequest2.apply(this, arguments);\n      }\n      return _sendSessionRequest;\n    }()\n  }, {\n    key: \"_sendCallRequest\",\n    value: function _sendCallRequest(request, options) {\n      this._sendRequest(request, options);\n      this._eventManager.trigger({\n        event: \"call_request_sent\",\n        params: [{\n          request: request,\n          options: options\n        }]\n      });\n      return this._subscribeToCallResponse(request.id);\n    }\n  }, {\n    key: \"_formatRequest\",\n    value: function _formatRequest(request) {\n      if (typeof request.method === \"undefined\") {\n        throw new Error(ERROR_MISSING_METHOD);\n      }\n      var formattedRequest = {\n        id: typeof request.id === \"undefined\" ? payloadId() : request.id,\n        jsonrpc: \"2.0\",\n        method: request.method,\n        params: typeof request.params === \"undefined\" ? [] : request.params\n      };\n      return formattedRequest;\n    }\n  }, {\n    key: \"_formatResponse\",\n    value: function _formatResponse(response) {\n      if (typeof response.id === \"undefined\") {\n        throw new Error(ERROR_MISSING_ID);\n      }\n      var baseResponse = {\n        id: response.id,\n        jsonrpc: \"2.0\"\n      };\n      if (isJsonRpcResponseError(response)) {\n        var error = formatRpcError(response.error);\n        var errorResponse = Object.assign(Object.assign(Object.assign({}, baseResponse), response), {\n          error: error\n        });\n        return errorResponse;\n      } else if (isJsonRpcResponseSuccess(response)) {\n        var successResponse = Object.assign(Object.assign({}, baseResponse), response);\n        return successResponse;\n      }\n      throw new Error(ERROR_INVALID_RESPONSE);\n    }\n  }, {\n    key: \"_handleSessionDisconnect\",\n    value: function _handleSessionDisconnect(errorMsg) {\n      var message = errorMsg || \"Session Disconnected\";\n      if (!this._connected) {\n        if (this._qrcodeModal) {\n          this._qrcodeModal.close();\n        }\n        removeLocal(mobileLinkChoiceKey);\n      }\n      if (this._connected) {\n        this._connected = false;\n      }\n      if (this._handshakeId) {\n        this._handshakeId = 0;\n      }\n      if (this._handshakeTopic) {\n        this._handshakeTopic = \"\";\n      }\n      if (this._peerId) {\n        this._peerId = \"\";\n      }\n      this._eventManager.trigger({\n        event: \"disconnect\",\n        params: [{\n          message: message\n        }]\n      });\n      this._removeStorageSession();\n      this.transportClose();\n    }\n  }, {\n    key: \"_handleSessionResponse\",\n    value: function _handleSessionResponse(errorMsg, sessionParams) {\n      if (sessionParams) {\n        if (sessionParams.approved) {\n          if (!this._connected) {\n            this._connected = true;\n            if (sessionParams.chainId) {\n              this.chainId = sessionParams.chainId;\n            }\n            if (sessionParams.accounts) {\n              this.accounts = sessionParams.accounts;\n            }\n            if (sessionParams.peerId && !this.peerId) {\n              this.peerId = sessionParams.peerId;\n            }\n            if (sessionParams.peerMeta && !this.peerMeta) {\n              this.peerMeta = sessionParams.peerMeta;\n            }\n            this._eventManager.trigger({\n              event: \"connect\",\n              params: [{\n                peerId: this.peerId,\n                peerMeta: this.peerMeta,\n                chainId: this.chainId,\n                accounts: this.accounts\n              }]\n            });\n          } else {\n            if (sessionParams.chainId) {\n              this.chainId = sessionParams.chainId;\n            }\n            if (sessionParams.accounts) {\n              this.accounts = sessionParams.accounts;\n            }\n            this._eventManager.trigger({\n              event: \"session_update\",\n              params: [{\n                chainId: this.chainId,\n                accounts: this.accounts\n              }]\n            });\n          }\n          this._manageStorageSession();\n        } else {\n          this._handleSessionDisconnect(errorMsg);\n        }\n      } else {\n        this._handleSessionDisconnect(errorMsg);\n      }\n    }\n  }, {\n    key: \"_handleIncomingMessages\",\n    value: function () {\n      var _handleIncomingMessages2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee16(socketMessage) {\n        var activeTopics, encryptionPayload, payload;\n        return _regeneratorRuntime().wrap(function _callee16$(_context16) {\n          while (1) switch (_context16.prev = _context16.next) {\n            case 0:\n              activeTopics = [this.clientId, this.handshakeTopic];\n              if (activeTopics.includes(socketMessage.topic)) {\n                _context16.next = 3;\n                break;\n              }\n              return _context16.abrupt(\"return\");\n            case 3:\n              _context16.prev = 3;\n              encryptionPayload = JSON.parse(socketMessage.payload);\n              _context16.next = 10;\n              break;\n            case 7:\n              _context16.prev = 7;\n              _context16.t0 = _context16[\"catch\"](3);\n              return _context16.abrupt(\"return\");\n            case 10:\n              _context16.next = 12;\n              return this._decrypt(encryptionPayload);\n            case 12:\n              payload = _context16.sent;\n              if (payload) {\n                this._eventManager.trigger(payload);\n              }\n            case 14:\n            case \"end\":\n              return _context16.stop();\n          }\n        }, _callee16, this, [[3, 7]]);\n      }));\n      function _handleIncomingMessages(_x21) {\n        return _handleIncomingMessages2.apply(this, arguments);\n      }\n      return _handleIncomingMessages;\n    }()\n  }, {\n    key: \"_subscribeToSessionRequest\",\n    value: function _subscribeToSessionRequest() {\n      this._transport.subscribe(this.handshakeTopic);\n    }\n  }, {\n    key: \"_subscribeToResponse\",\n    value: function _subscribeToResponse(id, callback) {\n      this.on(\"response:\".concat(id), callback);\n    }\n  }, {\n    key: \"_subscribeToSessionResponse\",\n    value: function _subscribeToSessionResponse(id, errorMsg) {\n      var _this4 = this;\n      this._subscribeToResponse(id, function (error, payload) {\n        if (error) {\n          _this4._handleSessionResponse(error.message);\n          return;\n        }\n        if (isJsonRpcResponseSuccess(payload)) {\n          _this4._handleSessionResponse(errorMsg, payload.result);\n        } else if (payload.error && payload.error.message) {\n          _this4._handleSessionResponse(payload.error.message);\n        } else {\n          _this4._handleSessionResponse(errorMsg);\n        }\n      });\n    }\n  }, {\n    key: \"_subscribeToCallResponse\",\n    value: function _subscribeToCallResponse(id) {\n      var _this5 = this;\n      return new Promise(function (resolve, reject) {\n        _this5._subscribeToResponse(id, function (error, payload) {\n          if (error) {\n            reject(error);\n            return;\n          }\n          if (isJsonRpcResponseSuccess(payload)) {\n            resolve(payload.result);\n          } else if (payload.error && payload.error.message) {\n            reject(payload.error);\n          } else {\n            reject(new Error(ERROR_INVALID_RESPONSE));\n          }\n        });\n      });\n    }\n  }, {\n    key: \"_subscribeToInternalEvents\",\n    value: function _subscribeToInternalEvents() {\n      var _this6 = this;\n      this.on(\"display_uri\", function () {\n        if (_this6._qrcodeModal) {\n          _this6._qrcodeModal.open(_this6.uri, function () {\n            _this6._eventManager.trigger({\n              event: \"modal_closed\",\n              params: []\n            });\n          }, _this6._qrcodeModalOptions);\n        }\n      });\n      this.on(\"connect\", function () {\n        if (_this6._qrcodeModal) {\n          _this6._qrcodeModal.close();\n        }\n      });\n      this.on(\"call_request_sent\", function (error, payload) {\n        var request = payload.params[0].request;\n        if (isMobile() && _this6._signingMethods.includes(request.method)) {\n          var mobileLinkUrl = getLocal(mobileLinkChoiceKey);\n          if (mobileLinkUrl) {\n            window.location.href = mobileLinkUrl.href;\n          }\n        }\n      });\n      this.on(\"wc_sessionRequest\", function (error, payload) {\n        if (error) {\n          _this6._eventManager.trigger({\n            event: \"error\",\n            params: [{\n              code: \"SESSION_REQUEST_ERROR\",\n              message: error.toString()\n            }]\n          });\n        }\n        _this6.handshakeId = payload.id;\n        _this6.peerId = payload.params[0].peerId;\n        _this6.peerMeta = payload.params[0].peerMeta;\n        var internalPayload = Object.assign(Object.assign({}, payload), {\n          method: \"session_request\"\n        });\n        _this6._eventManager.trigger(internalPayload);\n      });\n      this.on(\"wc_sessionUpdate\", function (error, payload) {\n        if (error) {\n          _this6._handleSessionResponse(error.message);\n        }\n        _this6._handleSessionResponse(\"Session disconnected\", payload.params[0]);\n      });\n    }\n  }, {\n    key: \"_initTransport\",\n    value: function _initTransport() {\n      var _this7 = this;\n      this._transport.on(\"message\", function (socketMessage) {\n        return _this7._handleIncomingMessages(socketMessage);\n      });\n      this._transport.on(\"open\", function () {\n        return _this7._eventManager.trigger({\n          event: \"transport_open\",\n          params: []\n        });\n      });\n      this._transport.on(\"close\", function () {\n        return _this7._eventManager.trigger({\n          event: \"transport_close\",\n          params: []\n        });\n      });\n      this._transport.on(\"error\", function () {\n        return _this7._eventManager.trigger({\n          event: \"transport_error\",\n          params: [\"Websocket connection failed\"]\n        });\n      });\n      this._transport.open();\n    }\n  }, {\n    key: \"_formatUri\",\n    value: function _formatUri() {\n      var protocol = this.protocol;\n      var handshakeTopic = this.handshakeTopic;\n      var version = this.version;\n      var bridge = encodeURIComponent(this.bridge);\n      var key = this.key;\n      var uri = \"\".concat(protocol, \":\").concat(handshakeTopic, \"@\").concat(version, \"?bridge=\").concat(bridge, \"&key=\").concat(key);\n      return uri;\n    }\n  }, {\n    key: \"_parseUri\",\n    value: function _parseUri(uri) {\n      var result = parseWalletConnectUri(uri);\n      if (result.protocol === this.protocol) {\n        if (!result.handshakeTopic) {\n          throw Error(\"Invalid or missing handshakeTopic parameter value\");\n        }\n        var handshakeTopic = result.handshakeTopic;\n        if (!result.bridge) {\n          throw Error(\"Invalid or missing bridge url parameter value\");\n        }\n        var bridge = decodeURIComponent(result.bridge);\n        if (!result.key) {\n          throw Error(\"Invalid or missing key parameter value\");\n        }\n        var key = result.key;\n        return {\n          handshakeTopic: handshakeTopic,\n          bridge: bridge,\n          key: key\n        };\n      } else {\n        throw new Error(ERROR_INVALID_URI);\n      }\n    }\n  }, {\n    key: \"_generateKey\",\n    value: function () {\n      var _generateKey2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee17() {\n        var result;\n        return _regeneratorRuntime().wrap(function _callee17$(_context17) {\n          while (1) switch (_context17.prev = _context17.next) {\n            case 0:\n              if (!this._cryptoLib) {\n                _context17.next = 5;\n                break;\n              }\n              _context17.next = 3;\n              return this._cryptoLib.generateKey();\n            case 3:\n              result = _context17.sent;\n              return _context17.abrupt(\"return\", result);\n            case 5:\n              return _context17.abrupt(\"return\", null);\n            case 6:\n            case \"end\":\n              return _context17.stop();\n          }\n        }, _callee17, this);\n      }));\n      function _generateKey() {\n        return _generateKey2.apply(this, arguments);\n      }\n      return _generateKey;\n    }()\n  }, {\n    key: \"_encrypt\",\n    value: function () {\n      var _encrypt2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee18(data) {\n        var key, result;\n        return _regeneratorRuntime().wrap(function _callee18$(_context18) {\n          while (1) switch (_context18.prev = _context18.next) {\n            case 0:\n              key = this._key;\n              if (!(this._cryptoLib && key)) {\n                _context18.next = 6;\n                break;\n              }\n              _context18.next = 4;\n              return this._cryptoLib.encrypt(data, key);\n            case 4:\n              result = _context18.sent;\n              return _context18.abrupt(\"return\", result);\n            case 6:\n              return _context18.abrupt(\"return\", null);\n            case 7:\n            case \"end\":\n              return _context18.stop();\n          }\n        }, _callee18, this);\n      }));\n      function _encrypt(_x22) {\n        return _encrypt2.apply(this, arguments);\n      }\n      return _encrypt;\n    }()\n  }, {\n    key: \"_decrypt\",\n    value: function () {\n      var _decrypt2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee19(payload) {\n        var key, result;\n        return _regeneratorRuntime().wrap(function _callee19$(_context19) {\n          while (1) switch (_context19.prev = _context19.next) {\n            case 0:\n              key = this._key;\n              if (!(this._cryptoLib && key)) {\n                _context19.next = 6;\n                break;\n              }\n              _context19.next = 4;\n              return this._cryptoLib.decrypt(payload, key);\n            case 4:\n              result = _context19.sent;\n              return _context19.abrupt(\"return\", result);\n            case 6:\n              return _context19.abrupt(\"return\", null);\n            case 7:\n            case \"end\":\n              return _context19.stop();\n          }\n        }, _callee19, this);\n      }));\n      function _decrypt(_x23) {\n        return _decrypt2.apply(this, arguments);\n      }\n      return _decrypt;\n    }()\n  }, {\n    key: \"_getStorageSession\",\n    value: function _getStorageSession() {\n      var result = null;\n      if (this._sessionStorage) {\n        result = this._sessionStorage.getSession();\n      }\n      return result;\n    }\n  }, {\n    key: \"_setStorageSession\",\n    value: function _setStorageSession() {\n      if (this._sessionStorage) {\n        this._sessionStorage.setSession(this.session);\n      }\n    }\n  }, {\n    key: \"_removeStorageSession\",\n    value: function _removeStorageSession() {\n      if (this._sessionStorage) {\n        this._sessionStorage.removeSession();\n      }\n    }\n  }, {\n    key: \"_manageStorageSession\",\n    value: function _manageStorageSession() {\n      if (this._connected) {\n        this._setStorageSession();\n      } else {\n        this._removeStorageSession();\n      }\n    }\n  }, {\n    key: \"_registerPushServer\",\n    value: function _registerPushServer(pushServerOpts) {\n      if (!pushServerOpts.url || typeof pushServerOpts.url !== \"string\") {\n        throw Error(\"Invalid or missing pushServerOpts.url parameter value\");\n      }\n      if (!pushServerOpts.type || typeof pushServerOpts.type !== \"string\") {\n        throw Error(\"Invalid or missing pushServerOpts.type parameter value\");\n      }\n      if (!pushServerOpts.token || typeof pushServerOpts.token !== \"string\") {\n        throw Error(\"Invalid or missing pushServerOpts.token parameter value\");\n      }\n      var pushSubscription = {\n        bridge: this.bridge,\n        topic: this.clientId,\n        type: pushServerOpts.type,\n        token: pushServerOpts.token,\n        peerName: \"\",\n        language: pushServerOpts.language || \"\"\n      };\n      this.on(\"connect\", /*#__PURE__*/function () {\n        var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee20(error, payload) {\n          var peerName, response, json;\n          return _regeneratorRuntime().wrap(function _callee20$(_context20) {\n            while (1) switch (_context20.prev = _context20.next) {\n              case 0:\n                if (!error) {\n                  _context20.next = 2;\n                  break;\n                }\n                throw error;\n              case 2:\n                if (pushServerOpts.peerMeta) {\n                  peerName = payload.params[0].peerMeta.name;\n                  pushSubscription.peerName = peerName;\n                }\n                _context20.prev = 3;\n                _context20.next = 6;\n                return fetch(\"\".concat(pushServerOpts.url, \"/new\"), {\n                  method: \"POST\",\n                  headers: {\n                    Accept: \"application/json\",\n                    \"Content-Type\": \"application/json\"\n                  },\n                  body: JSON.stringify(pushSubscription)\n                });\n              case 6:\n                response = _context20.sent;\n                _context20.next = 9;\n                return response.json();\n              case 9:\n                json = _context20.sent;\n                if (json.success) {\n                  _context20.next = 12;\n                  break;\n                }\n                throw Error(\"Failed to register in Push Server\");\n              case 12:\n                _context20.next = 17;\n                break;\n              case 14:\n                _context20.prev = 14;\n                _context20.t0 = _context20[\"catch\"](3);\n                throw Error(\"Failed to register in Push Server\");\n              case 17:\n              case \"end\":\n                return _context20.stop();\n            }\n          }, _callee20, null, [[3, 14]]);\n        }));\n        return function (_x24, _x25) {\n          return _ref2.apply(this, arguments);\n        };\n      }());\n    }\n  }]);\n  return Connector;\n}();\nexport default Connector;","map":{"version":3,"names":["parsePersonalSign","parseTransactionData","convertArrayBufferToHex","convertHexToArrayBuffer","getClientMeta","payloadId","uuid","formatRpcError","parseWalletConnectUri","convertNumberToHex","isJsonRpcResponseSuccess","isJsonRpcResponseError","isSilentPayload","getLocal","signingMethods","mobileLinkChoiceKey","isMobile","removeLocal","SocketTransport","ERROR_SESSION_CONNECTED","ERROR_SESSION_DISCONNECTED","ERROR_SESSION_REJECTED","ERROR_MISSING_JSON_RPC","ERROR_MISSING_RESULT","ERROR_MISSING_ERROR","ERROR_MISSING_METHOD","ERROR_MISSING_ID","ERROR_INVALID_RESPONSE","ERROR_INVALID_URI","ERROR_MISSING_REQUIRED","ERROR_QRCODE_MODAL_NOT_PROVIDED","ERROR_QRCODE_MODAL_USER_CLOSED","EventManager","SessionStorage","getBridgeUrl","Connector","opts","_classCallCheck","protocol","version","_bridge","_key","_clientId","_clientMeta","_peerId","_peerMeta","_handshakeId","_handshakeTopic","_connected","_accounts","_chainId","_networkId","_rpcUrl","_eventManager","connectorOpts","clientMeta","_cryptoLib","cryptoLib","_sessionStorage","sessionStorage","storageId","_qrcodeModal","qrcodeModal","_qrcodeModalOptions","qrcodeModalOptions","_signingMethods","concat","_toConsumableArray","bridge","uri","session","Error","_getStorageSession","handshakeId","_subscribeToSessionResponse","_transport","transport","url","subscriptions","clientId","_subscribeToInternalEvents","_initTransport","_subscribeToSessionRequest","pushServerOpts","_registerPushServer","_createClass","key","get","set","value","peerMeta","_uri","_formatUri","_this$_parseUri","_parseUri","handshakeTopic","chainId","networkId","accounts","rpcUrl","connected","peerId","on","event","callback","eventEmitter","subscribe","off","unsubscribe","_createInstantRequest","_asyncToGenerator","_regeneratorRuntime","mark","_callee","instantRequest","_this","request","endInstantRequest","result","wrap","_callee$","_context","prev","next","_generateKey","sent","_formatRequest","method","params","id","trigger","killSession","_sendCallRequest","abrupt","t0","stop","createInstantRequest","_x","apply","arguments","_connect","_callee3","_this2","_callee3$","_context3","createSession","Promise","_ref","_callee2","resolve","reject","_callee2$","_context2","error","payload","_x3","_x4","connect","_x2","_createSession","_callee4","_callee4$","_context4","pending","_sendSessionRequest","topic","_x5","approveSession","sessionStatus","sessionParams","approved","response","jsonrpc","_sendResponse","_setStorageSession","rejectSession","sessionError","message","_formatResponse","_removeStorageSession","updateSession","_manageStorageSession","_killSession","_callee5","_callee5$","_context5","_sendRequest","_handleSessionDisconnect","_x6","_sendTransaction","_callee6","tx","parsedTx","_callee6$","_context6","sendTransaction","_x7","_signTransaction","_callee7","_callee7$","_context7","signTransaction","_x8","_signMessage","_callee8","_callee8$","_context8","signMessage","_x9","_signPersonalMessage","_callee9","_callee9$","_context9","signPersonalMessage","_x10","_signTypedData","_callee10","_callee10$","_context10","signTypedData","_x11","_updateChain","_callee11","chainParams","_callee11$","_context11","updateChain","_x12","unsafeSend","options","_this3","_subscribeToResponse","_sendCustomRequest","_callee12","formattedRequest","_callee12$","_context12","sendCustomRequest","_x13","_x14","approveRequest","formattedResponse","rejectRequest","transportClose","close","_sendRequest2","_callee13","callRequest","encryptionPayload","silent","_callee13$","_context13","_encrypt","JSON","stringify","forcePushNotification","send","_x15","_x16","_sendResponse2","_callee14","_callee14$","_context14","_x17","_sendSessionRequest2","_callee15","errorMsg","_callee15$","_context15","_x18","_x19","_x20","_subscribeToCallResponse","baseResponse","errorResponse","Object","assign","successResponse","_handleSessionResponse","_handleIncomingMessages2","_callee16","socketMessage","activeTopics","_callee16$","_context16","includes","parse","_decrypt","_handleIncomingMessages","_x21","_this4","_this5","_this6","open","mobileLinkUrl","window","location","href","code","toString","internalPayload","_this7","encodeURIComponent","decodeURIComponent","_generateKey2","_callee17","_callee17$","_context17","generateKey","_encrypt2","_callee18","data","_callee18$","_context18","encrypt","_x22","_decrypt2","_callee19","_callee19$","_context19","decrypt","_x23","getSession","setSession","removeSession","type","token","pushSubscription","peerName","language","_ref2","_callee20","json","_callee20$","_context20","name","fetch","headers","Accept","body","success","_x24","_x25"],"sources":["../../src/index.ts"],"sourcesContent":[null],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}